<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<title>EEC - Wireless ESD Mornitoring system</title>
<style>
  /* CSS cho header */
    .header {
        padding: 20px;
        text-align: center;
        background-image: url("/static/pic/Fac.jpg"); /* Thay bằng đường dẫn ảnh thật */
        background-size: cover;         /* Ảnh phủ kín layout */
        background-position: center;    /* Căn giữa ảnh */
        background-repeat: no-repeat;   /* Không lặp ảnh */
    }

  /* CSS cho navigation */
    .navigation {
        background: linear-gradient(to right, #3a7bd5, #00d2ff); /* Gradient xanh biển */
        padding: 10px 20px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15); /* Đổ bóng nhẹ */
        border-radius: 8px;
    }

    .navigation a {
        float: left;
        color: white;
        font-size: 20px;
        font-weight: bold;
        text-align: center;
        padding: 12px 18px;
        text-decoration: none;
        font-weight: bold;
        transition: background 0.3s ease, transform 0.2s ease;
        border-radius: 6px;
    }

  /* CSS cho content */
    .content {
        display: flex; /* Sử dụng flexbox */
    }

    .main-content {
        flex: 3; /* Chiếm 3 phần */
        padding: 20px;
        background-color: cyan;
    }
    .content-header{
        flex: 3; /* Chiếm 3 phần */
        padding: 20px;
        text-align: center;
        font-size: 35px;
        background-color: lightgray;
    }

    .sidebar {
        flex: 1; /* Chiếm 1 phần */
        padding: 20px;
        background-color:lightslategray;
    }

  /* CSS cho footer */
    .footer {
        background-color: #333;
        color: white;
        text-align: center;
        align-items: flex-end;
        padding: 10px;
        clear: both; /* Đảm bảo footer không bị ảnh hưởng bởi float */
    }
    .colHeader{
        width: 20px;
        height: 16px;
        padding: 18px;
        border-radius: 4px;
        background-color: black;
    }
    .colorBox{
        padding: 12px 20px;
    }
    .layout {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 20px;
        grid-auto-rows: auto;
        justify-items: left;
        align-items: flex-start;
        margin: 40px;
        }

    .column {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: 16px;
        }

    .label {
        background-color: black;
        color: white;
        width: 60px;
        height: 60px;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 4px;
        }
    .box_18v_2 {
        position: relative;
        background: linear-gradient(to bottom right, #9ccc65, #7cb342); /* Gradient xanh mịn */
        color: white;
        font-weight: bold;
        font-family: 'Segoe UI', sans-serif;
        font-size: 16px;

        width: 100%;
        height: 200px;

        display: flex;
        justify-content: center;
        align-items: flex-start; /* Center để nội dung đẹp hơn */

        border: 1px solid #5a9216;
        border-radius: 10px;

        box-shadow:
            0 4px 10px rgba(0, 0, 0, 0.2),
            inset 0 -2px 4px rgba(255, 255, 255, 0.1);

        transition: all 0.3s ease-in-out;
        }
    .box_18v {
        position: relative;
        background: linear-gradient(to bottom right, #d4f28f, #9edc3f); /* màu gradient nhẹ */
        color: #333;
        font-weight: bold;
        font-family: 'Segoe UI', sans-serif;
        width: 100%;
        height: 100px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        border: 1px solid #aacd4c;
        border-radius: 12px;

        /* 3D shadow */
        box-shadow:
            0 4px 6px rgba(0, 0, 0, 0.1),
            0 8px 20px rgba(0, 0, 0, 0.15),
            inset 0 -2px 4px rgba(255, 255, 255, 0.3);
        
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
    .box_ridgid {
        position: relative;
        background: linear-gradient(to bottom right, #ffb347, #ff7e00); /* gradient màu cam mịn */
        color: black;
        font-weight: bold;
        font-family: 'Segoe UI', sans-serif;
        width: 100%;
        height: 100px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        border: 1px solid #d67d00;
        border-radius: 12px;

        /* Hiệu ứng 3D */
        box-shadow:
            0 4px 8px rgba(0, 0, 0, 0.2),
            inset 0 -2px 5px rgba(255, 255, 255, 0.3);

        transition: transform 0.2s ease, box-shadow 0.2s ease;
        padding-top: 10px;
        }
    .box_hart{
        position: relative;
        background: linear-gradient(to bottom right, #4a90e2, #007aff); /* Gradient xanh mịn */
        color: white;
        font-weight: bold;
        font-family: 'Segoe UI', sans-serif;
        width: 100%;
        height: 100px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        border: 1px solid #005bb5;
        border-radius: 12px;

        /* Hiệu ứng 3D */
        box-shadow:
            0 4px 8px rgba(0, 0, 0, 0.2),
            inset 0 -2px 5px rgba(255, 255, 255, 0.1);

        transition: transform 0.2s ease, box-shadow 0.2s ease;
        padding-top: 10px;
    }
    
    .box_skatcher {
        position: relative;
        background: linear-gradient(to bottom right, #fff59d, #fbc02d);
        color: #222;
        font-weight: bold;
        font-family: 'Segoe UI', sans-serif;

        width: 100%;
        height: 100px;

        display: flex;
        justify-content: center;
        align-items: flex-start; /* Đổi từ flex-start → center để cân giữa nội dung */

        border: 1px solid #e6b800;
        border-radius: 10px;

        box-shadow:
            0 4px 8px rgba(0, 0, 0, 0.15),
            inset 0 -2px 4px rgba(255, 255, 255, 0.2);

        transition: all 0.3s ease-in-out;
        }
    .box_kitting {
        background: linear-gradient(to bottom right, #777, #555); /* Gradient xám mịn */
        color: white;
        font-weight: bold;
        font-family: 'Segoe UI', sans-serif;

        width: 100%;
        height: 100px;
        display: flex;
        justify-content: center;
        align-items: center;

        border: 1px solid #444;
        border-radius: 10px;

        /* Hiệu ứng bóng đổ */
        box-shadow:
            0 4px 8px rgba(0, 0, 0, 0.2),
            inset 0 -1px 4px rgba(255, 255, 255, 0.05);

        transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
    .box_walking {
        background-color: white;
        color: white;
        width: 100%;
        height: 100px;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 1px solid white;
        border-radius: 6px;
        }
    .box_kitting_laser {
        background: linear-gradient(to bottom right, #666, #444); /* Gradient xám hiện đại */
        color: white;
        font-weight: bold;
        font-family: 'Segoe UI', sans-serif;

        width: 100%;
        height: 220px;
        display: flex;
        justify-content: center;
        align-items: center;

        border: 1px solid #222;
        border-radius: 12px;

        /* Hiệu ứng đổ bóng 3D */
        box-shadow:
            0 6px 12px rgba(0, 0, 0, 0.25),
            inset 0 -2px 4px rgba(255, 255, 255, 0.05);

        transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
    .box_office {
        background: linear-gradient(to bottom right, #ffffff, #f0f0f0); /* Nền trắng mịn */
        color: #222;
        font-weight: bold;
        font-family: 'Segoe UI', sans-serif;

        width: 100%;
        height: 100px;
        display: flex;
        justify-content: center;
        align-items: center;

        border: 1px solid #ccc;
        border-radius: 10px;

        box-shadow:
            0 4px 8px rgba(0, 0, 0, 0.1),
            inset 0 -1px 2px rgba(0, 0, 0, 0.05);

        transition: all 0.2s ease;
        }
    .box_40v_laser {
        position: relative;
        background: linear-gradient(to bottom, #8fd349, #7ac83c); /* Hiệu ứng chuyển màu xanh */
        color: #222;
        font-weight: bold;
        font-family: 'Segoe UI', sans-serif;
        width: 100%;
        height: 220px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        padding-top: 10px;
        border: 1px solid #5a9730;
        border-radius: 10px;
        box-shadow:
            0 4px 8px rgba(0, 0, 0, 0.1),
            inset 0 -2px 4px rgba(255, 255, 255, 0.15);

        transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
    .box_restroom {
        background: linear-gradient(to bottom right, #000000, #1a1a1a);
        color: white;
        font-size: 50px;
        font-weight: bold;
        font-family: 'Segoe UI', sans-serif;

        width: 100%;
        height: 800px;
        display: flex;
        align-items: center;
        justify-content: center;

        grid-row-end: span 7;

        border: 1px solid #444;
        border-radius: 10px;

        box-shadow:
            0 4px 12px rgba(0, 0, 0, 0.5),
            inset 0 -2px 4px rgba(255, 255, 255, 0.05);

        transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
    .box_40v {
        position: relative;
        background: linear-gradient(to bottom right, #8fd349, #76b32c);
        color: black;
        font-weight: bold;
        font-family: 'Segoe UI', sans-serif;

        width: 100%;
        height: 100px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        padding-top: 12px;

        border: 1px solid #5a9520;
        border-radius: 10px;

        box-shadow:
            0 4px 8px rgba(0, 0, 0, 0.2),
            inset 0 -2px 4px rgba(255, 255, 255, 0.3);

        transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
    .box_hoover {
        position: relative;
        background: linear-gradient(to bottom right, #ef5350, #d32f2f); /* đỏ gradient đẹp */
        color: white;
        font-weight: bold;
        font-family: 'Segoe UI', sans-serif;
        font-size: 16px;

        width: 100%;
        height: 100px;

        display: flex;
        justify-content: center;
        align-items: flex-start;

        border: 1px solid #b71c1c;
        border-radius: 10px;

        box-shadow:
            0 4px 10px rgba(0, 0, 0, 0.2),
            inset 0 -2px 4px rgba(255, 255, 255, 0.1);

        transition: all 0.3s ease-in-out;
        }        
    .box_inveter {
        position: relative;
        background: linear-gradient(to bottom right, #ffeb3b, #fbc02d);
        color: #333;
        font-weight: bold;
        font-family: 'Segoe UI', sans-serif;

        width: 75%;
        height: 220px;

        display: flex;
        justify-content: center;
        align-items: flex-start; /* fix lỗi align-items: flex-right */

        border: 1px solid #b89c00;
        border-radius: 10px;

        grid-column: 1 / 3;
        grid-row-end: span 2;

        box-shadow:
            0 4px 8px rgba(0, 0, 0, 0.2),
            inset 0 -2px 4px rgba(255, 255, 255, 0.3);

        transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
    .box_powerbox {
        position: relative;
        background: linear-gradient(to bottom right, #fff176, #fdd835);
        color: #333;
        font-weight: bold;
        font-family: 'Segoe UI', sans-serif;

        width: 75%;
        height: 170px;

        display: flex;
        justify-content: center;
        align-items: flex-start; /* fix lỗi flex-right */

        grid-column: 1 / 3;
        grid-row-end: span 2;

        border: 1px solid #c2a600;
        border-radius: 10px;

        box-shadow:
            0 4px 8px rgba(0, 0, 0, 0.2),
            inset 0 -2px 4px rgba(255, 255, 255, 0.3);

        transition: all 0.3s ease-in-out;
        }
    .box-icon {
        width: 50px;      /* hoặc 20px tùy kích thước bạn muốn */
        height: 50px;
        margin-left: 5px; /* tạo khoảng cách với chữ */
        vertical-align: middle;
      }

    .green {
        background-color: #8fd349;
        }

    .black {
        background-color: black;
        width: 50px;
        height: 50px;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: bold;
        border-radius: 4px;
        }
      .boxOK
      {
        background-color: green;
        color: white;
        width: 100%;
        height: 100px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        border: 1px solid #333;
        border-radius: 6px;
      }

    .status-section {
        padding: 20px;
        background-color: #ded2d2;
        font-family: sans-serif;
      }

    .status-box {
        width: 300px;
        height: 100px;
        color: white;
        font-weight: bold;
        text-align: center;
        line-height: 100px;
        border-radius: 8px;
        margin: 10px 0;
      }

    .ok {
        background: linear-gradient(to bottom, #a8e063, #56ab2f);
      }

      /* Trạng thái NG hình tròn */
    .status-circle {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        margin-top: 10px;
        margin-left: 5px;
        display: inline-block;
      }

    .ng {
        background: linear-gradient(to bottom, #ff5858, #e32b2b);
      }
    .box-content {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .led-container {
        display: flex;
        justify-content: center;
        gap: 20px;
        position: absolute;
        bottom: 10%;          /* 👈 nằm sát đáy box */
        left: 50%;
        transform: translateX(-50%);
    }

    .led {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        box-shadow: 0 0 4px rgba(0, 0, 0, 0.4);
        justify-self: flex-end;
    }

    .led.red {
        background-color: red;
    }

    .led.green {
        background-color: limegreen;
    }
    .box-error {
        background: red !important;
        color: white !important;
    }

/* Popup overlay */
.popup {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.4); /* Nền mờ */
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 999;
}

.popup.hidden {
  display: none;
}

.popup-content {
  background: white;
  padding: 20px;
  border-radius: 10px;
  position: relative;
}


/* Đóng popup */
.close {
  position: absolute;
  top: 20px;
  right: 30px;
  font-size: 28px;
  cursor: pointer;
}

/* LED bên trong popup */
.popup-led-container {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-top: 20px;
}
.led {
  width: 25px;
  height: 25px;
  border-radius: 50%;
  border: 2px solid #555;
}

.led.red {
  background-color: red;
}

.led.green {
  background-color: limegreen;
}

/* Ẩn popup mặc định */
.hidden {
  display: none;
}

</style>
</head>
<body>

  <div class="header">
    <h1>EEC - Wireless ESD Mornitoring System</h1>
  </div>

  <div class="navigation">
    <a href="#">🏠HOME</a>
    <a href="#">⚡ESD Monitoring</a>
    <a href="#">📊SPC</a>
  </div>

  <div class="content">
    <div class="content-header">
      <h2>ESD Controlled Area</h2>
        <div class="layout" style="font-size: 20px;">
            <!-- Row 1 -->
            <div class="label black" style="grid-column-start: 1;">L1</div>
            <div class="label black" style="grid-template-columns: 2;">K1</div>
            <div class="label black" style="grid-template-columns: 3;">J1</div>
            <!-- Hàng 1 -->
            <div class="box_40v_laser" id="C2-131" style="grid-column-start: 1 ; grid-column: 1 / 3;" onclick="openPopup('C2-131')">C2-131<img src="/static/pic/80RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting_laser" style="grid-column-start: 3;">Kitting Area</div>
            <!-- Hàng 2 -->
            <div class="box_40v" id="C2-132" style="grid-column-start: 1 ; grid-column: 1 / 3;" onclick="openPopup('C2-132')">C2-132<img src="/static/pic/80RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 3;">Kitting Area</div>
            <!-- Row 2 -->
            <div class="label black" style="grid-column-start: 1;">L2</div>
            <div class="label black" style="grid-template-columns: 2;">K2</div>
            <div class="label black" style="grid-template-columns: 3;">J2</div>   
            <!-- Hàng 1 -->
            <div class="box_40v" id="C2-133" style="grid-column-start: 1 ; grid-column: 1 / 3;" onclick="openPopup('C2-133')">C2-133<img src="/static/pic/40RYOBI.jpg.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 3;">Kitting Area</div>
            <div class="box_40v" id="C2-134" style="grid-column-start: 1 ; grid-column: 1 / 3;" onclick="openPopup('C2-134')">C2-134<img src="/static/pic/40RYOBI.jpg.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 3;">Kitting Area</div>
            <div class="box_40v" id="C2-135" style="grid-column-start: 1 ; grid-column: 1 / 3;" onclick="openPopup('C2-135')">C2-135<img src="/static/pic/40RYOBI.jpg.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 3;">Kitting Area</div>
            <!-- Row 3 -->
            <div class="label black" style="grid-column-start: 1;">L3</div>
            <div class="label black" style="grid-template-columns: 2;">K3</div>
            <div class="label black" style="grid-template-columns: 3;">J3</div>

            <div class="box_40v" id="C2-136" style="grid-column-start: 1 ; grid-column: 1 / 3;" onclick="openPopup('C2-136')">C2-136<img src="/static/pic/40RYOBI.jpg.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 3;">Kitting Area</div>
            <div class="box_40v" id="C2-137" style="grid-column-start: 1 ; grid-column: 1 / 3;" onclick="openPopup('C2-137')">C2-137<img src="/static/pic/40RYOBI.jpg.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 3;">Kitting Area</div>
            <div class="box_40v" id="C2-138" style="grid-column-start: 1 ; grid-column: 1 / 3;" onclick="openPopup('C2-138')">C2-138<img src="/static/pic/40RYOBI.jpg.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 3;">Kitting Area</div>
            <!-- Row 4 -->
            <div class="label black" style="grid-column-start: 1;">L4</div>
            <div class="label black" style="grid-template-columns: 2;">K4</div>
            <div class="label black" style="grid-template-columns: 3;">J4</div>

            <div class="box_40v" id="C2-139" style="grid-column-start: 1 ; grid-column: 1 / 3;" onclick="openPopup('C2-139')">C2-139<img src="/static/pic/40RYOBI.jpg.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 3;">Kitting Area</div>
            <div class="box_40v" id="C2-140" style="grid-column-start: 1 ; grid-column: 1 / 3;" onclick="openPopup('C2-140')">C2-140<img src="/static/pic/40RYOBI.jpg.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 3;">Kitting Area</div>
            <div class="box_40v" id="C2-141" style="grid-column-start: 1 ; grid-column: 1 / 3;" onclick="openPopup('C2-141')">C2-141<img src="/static/pic/40RYOBI.jpg.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 3;">Kitting Area</div>
            <!-- Row 5 -->
            <div class="label black" style="grid-column-start: 1;">L5</div>
            <div class="label black" style="grid-template-columns: 2;">K5</div>
            <div class="label black" style="grid-template-columns: 3;">J5</div>

            <div class="box_hoover" id="C2-142" style="grid-column-start: 1 ;" onclick="openPopup('C2-142')">C2-142<img src="/static/pic/hoover.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-OPLS" style="grid-column-start: 3" onclick="openPopup('OP-Laser Print')">OP-Laser Print <img src="/static/pic/pcba.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>

            <div class="box_18v_2" id="C2-096" style="grid-column-start: 1;" onclick="openPopup('C2-096')">C2-096<img src="/static/pic/4RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting " style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_ridgid" id="C2-093" style="grid-column-start: 3;" onclick="openPopup('C2-093')">C2-093 <img src="/static/pic/ridgid.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <!-- Row 6 -->
            <div class="label black" style="grid-column-start: 1;">L6</div>
            <div class="label black" style="grid-template-columns: 2;">K6</div>
            <div class="label black" style="grid-template-columns: 3;">J6</div>

            <div class="box_18v" id="C2-097" style="grid-column-start: 1;" onclick="openPopup('C2-097')">C2-097 <img src="/static/pic/cell.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting " style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_ridgid" id="C2-094" style="grid-column-start: 3;" onclick="openPopup('C2-094')">C2-094 <img src="/static/pic/ridgid.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_18v" id="C2-091" style="grid-column-start: 1;" onclick="openPopup('C2-091')">C2-091 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting " style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_ridgid" id="C2-095" style="grid-column-start: 3;" onclick="openPopup('C2-095')">C2-095 <img src="/static/pic/ridgid.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_18v" id="C2-092" style="grid-column-start: 1;" onclick="openPopup('C2-092')">C2-092 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_ridgid" id="C2-098" style="grid-column-start: 3;" onclick="openPopup('C2-098')">C2-098 <img src="/static/pic/ridgid.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>

            <!-- Row 7 -->
            <div class="label black" style="grid-column-start: 1;">L7</div>
            <div class="label black" style="grid-template-columns: 2;">K7</div>
            <div class="label black" style="grid-template-columns: 3;">J7</div>

            <div class="box_restroom " style="grid-column-start: 1">Rest Room</div>
            <div class="box_kitting " style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-CPTLS" style="grid-column-start: 3;" onclick="openPopup('CPT Laser Print')">CPT Laser Print <img src="/static/pic/pcba.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting " style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_hart" id="C2-100" style="grid-column-start: 3;" onclick="openPopup('C2-100')">C2-100 <img src="/static/pic/hart.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting " style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_hart" id="C2-113" style="grid-column-start: 3;" onclick="openPopup('C2-113')">C2-113 <img src="/static/pic/hart.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>


            <!-- Row 8 -->
            <div class="label black" style="grid-template-columns: 2;">K8</div>
            <div class="label black" style="grid-template-columns: 3;">J8</div>

            <div class="box_kitting" style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-114" style="grid-column-start: 3;" onclick="openPopup('C2-114')">C2-114 <img src="/static/pic/ryobi12ah.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting " style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-099" style="grid-column-start: 3;" onclick="openPopup('C2-099')">C2-099 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting " style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-101" style="grid-column-start: 3;" onclick="openPopup('C2-101')">C2-101 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>

            <!-- Row 9 -->
            <div class="label black" style="grid-column-start: 1;">L9</div>
            <div class="label black" style="grid-template-columns: 2;">K9</div>
            <div class="label black" style="grid-template-columns: 3;">J9</div>

            <div class="box_office" style="grid-column-start: 2">PROD Office Area</div>
            <div class="box_office" style="grid-column-start: 3">PM Test Area</div>
            <div class="box_skatcher" id="C2-143" style="grid-column-start: 1;" onclick="openPopup('C2-143')">C2-143 <img src="/static/pic/katcher.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting " style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-102" style="grid-column-start: 3;" onclick="openPopup('C2-102')">C2-102 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_skatcher" id="C2-144" style="grid-column-start: 1;" onclick="openPopup('C2-144')">C2-144 <img src="/static/pic/katcher.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-103" style="grid-column-start: 3;" onclick="openPopup('C2-103')">C2-103 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>

            <!-- Row 10 -->
            <div class="label black" style="grid-column-start: 1;">L10</div>
            <div class="label black" style="grid-template-columns: 2;">K10</div>
            <div class="label black" style="grid-template-columns: 3;">J10</div>

            <div class="box_18v" id="C2-081" style="grid-column-start: 1;" onclick="openPopup('C2-081')">C2-081 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-115" style="grid-column-start: 3;" onclick="openPopup('C2-115')">C2-115 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_18v" id="C2-082" style="grid-column-start: 1;" onclick="openPopup('C2-082')">C2-082 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting " style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-116" style="grid-column-start: 3;" onclick="openPopup('C2-116')">C2-116 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_18v" id="C2-083" style="grid-column-start: 1;" onclick="openPopup('C2-083')">C2-083 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting " style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-117" style="grid-column-start: 3;" onclick="openPopup('C2-117')">C2-117 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>

            <!-- Row 11 -->
            <div class="label black" style="grid-column-start: 1;">L11</div>
            <div class="label black" style="grid-template-columns: 2;">K11</div>
            <div class="label black" style="grid-template-columns: 3;">J11</div>

            <div class="box_18v" id="C2-084" style="grid-column-start: 1;" onclick="openPopup('C2-084')">C2-084 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting " style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-118" style="grid-column-start: 3;" onclick="openPopup('C2-118')">C2-118 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_18v" id="C2-085" style="grid-column-start: 1;" onclick="openPopup('C2-085')">C2-085 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting " style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-119" style="grid-column-start: 3;" onclick="openPopup('C2-119')">C2-119 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_18v" id="C2-086" style="grid-column-start: 1;" onclick="openPopup('C2-086')">C2-086 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting " style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-120" style="grid-column-start: 3;" onclick="openPopup('C2-120')">C2-120 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>

            <!-- Row 12 -->
            <div class="label black" style="grid-column-start: 1;">L12</div>
            <div class="label black" style="grid-template-columns: 2;">K12</div>
            <div class="label black" style="grid-template-columns: 3;">J12</div>

            <div class="box_18v" id="C2-087" style="grid-column-start: 1;" onclick="openPopup('C2-087')">C2-087 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-104" style="grid-column-start: 3;" onclick="openPopup('C2-104')">C2-104 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_18v" id="C2-088" style="grid-column-start: 1;" onclick="openPopup('C2-088')">C2-088 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting " style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-121" style="grid-column-start: 3;" onclick="openPopup('C2-121')">C2-121 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_18v" id="C2-089" style="grid-column-start: 1;" onclick="openPopup('C2-089')">C2-089 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting " style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-122" style="grid-column-start: 3;" onclick="openPopup('C2-122')">C2-122 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>

            <!-- Row 13 -->
            <div class="label black" style="grid-column-start: 1;">L12</div>
            <div class="label black" style="grid-template-columns: 2;">K12</div>
            <div class="label black" style="grid-template-columns: 3;">J12</div>

            <div class="box_18v" id="C2-090" style="grid-column-start: 1;" onclick="openPopup('C2-090')">C2-090 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 2">Kitting/FG</div>
            <div class="box_18v" id="C2-123" style="grid-column-start: 3;" onclick="openPopup('C2-123')">C2-123 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_inveter" id="C2-149" style="grid-column-start: 1; grid-row-end: span 2;"onclick="openPopup('C2-149')">C2-149 <img src="/static/pic/inverter.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_18v" id="C2-124" style="grid-column-start: 3;" onclick="openPopup('C2-124')">C2-124 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_18v" id="C2-147" style="grid-column-start: 3;;" onclick="openPopup('C2-147')">C2-147 <img src="/static/pic/18RYOBI.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>

            <!-- Row 14 -->
            <div class="label black" style="grid-column-start: 1;">L14</div>
            <div class="label black" style="grid-template-columns: 2;">K14</div>
            <div class="label black" style="grid-template-columns: 3;">J14</div>

            <div class="box_inveter" id="C2-150" style="grid-column-start: 1; grid-row-end: span 2;" onclick="openPopup('C2-150')">C2-150 <img src="/static/pic/inverter.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting_laser" style="grid-column-start: 3;">Kitting/FG</div>
            <div class="box_powerbox" id="C2-151" style="grid-column-start: 1; grid-row-end: span 2;" onclick="openPopup('C2-151')">C2-151 <img src="/static/pic/inveter.png" alt="logo" class="box-icon"><div class="led-container"></div> <!-- Nơi hiển thị LED --></div>
            <div class="box_kitting" style="grid-column-start: 3;">Kitting/FG</div>
        </div>

    </div>
    <div class="sidebar">
      <h2>Trạng Thái Hiển Thị</h2>
          <!-- Trạng thái OK -->
        <div class="status-note"></div>
        <div class="status-circle ok"></div>
        <span class="status-label">Trạng thái OK</span>
        <!-- Trạng thái NG với note -->
        <div class="status-note"></div>
        <div class="status-circle ng"></div>
        <span class="status-label">Trạng thái NG</span>

    </div>
  </div>

  <div class="footer">
    <p>Green Plannet Distribution Centre © 2025</p>
  </div>

<script>
let currentPopupDeviceId = null; // Thiết bị đang mở popup

function fetchData() {
 fetch('/api/devices')
        .then(response => response.json())
        .then(data => {
            data.forEach(device => {
                const box = document.getElementById(device.address);
                if (!box) return;

                // ✅ Đổi màu nền box nếu có LED đỏ
                if (device.data.includes(1)) {
                    box.style.backgroundColor = '#ffe5e5'; // ví dụ: hồng nhạt
                } else {
                    box.style.backgroundColor = '#ffffff'; // nền trắng
                }

                // ❌ Không hiển thị LED ở đây nữa
                // ✅ Khi popup mở thì mới hiển thị LED
                // Ta lưu data để dùng lại khi popup được mở
                box.dataset.ledData = JSON.stringify(device.data);
            });
        })
        .catch(error => {
            console.error('Fetch error:', error);
        });
}

setInterval(fetchData, 2000);
fetchData();
</script>

<div id="popup" class="popup" onclick="closePopup()">
  <div class="popup-content" onclick="event.stopPropagation()">
    <h3 id="popup-title">Thiết bị</h3>
    <div id="popup-leds" class="led-container"></div>
    <button onclick="closePopup()">Đóng</button>
  </div>
</div>

<script>
  function showPopup(name, data) {
    currentPopupDeviceId = name; // Lưu địa chỉ đang mở

    document.getElementById('popup-title').textContent = name;
    const container = document.getElementById('popup-leds');
    container.innerHTML = '';

    data.forEach(val => {
      const led = document.createElement('div');
      led.className = 'led ' + (val === 1 ? 'green' : 'red');
      container.appendChild(led);
    });

    popup.classList.remove('hidden');
  }
  // Đóng popup
  document.getElementById('close-btn').onclick = () => {
    document.getElementById('popup').classList.add('hidden');
  };
</script>
<script>
  // Đóng popup khi nhấn nút đóng
  document.getElementById('close-btn').onclick = function () {
    document.getElementById('popup').classList.add('hidden');
  };
</script>
<script>
  const popup = document.getElementById('popup');
  const popupContent = document.querySelector('.popup-content');
  const closeBtn = document.getElementById('close-btn');

  // Nhấn nút × để đóng
closeBtn.onclick = () => {
  popup.classList.add('hidden');
  currentPopupDeviceId = null;
};

  // Nhấn ngoài vùng popup-content để đóng
popup.addEventListener('click', function (event) {
  if (!popupContent.contains(event.target)) {
    popup.classList.add('hidden');
    currentPopupDeviceId = null;
  }
});
</script>
<script>
function openPopup(id) {
    currentPopupDeviceId = id;

    // Hiển thị popup
    document.getElementById("popup").style.display = "block";

    // Đặt tiêu đề hoặc ID thiết bị nếu muốn
    document.getElementById("popup-title").innerText = "Line: " + id;
}
function closePopup() {
    currentPopupDeviceId = null;
    document.getElementById("popup").style.display = "none";
}
</script>

</body>
</html>
